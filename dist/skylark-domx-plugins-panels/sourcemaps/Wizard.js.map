{"version":3,"sources":["Wizard.js"],"names":["define","langx","browser","eventer","noder","geom","$","plugins","panels","Wizard","Plugin","inherit","klassName","pluginName","options","disablePreviousStep","selectedItem","step","_construct","elm","this","overrided","$element","attr","currentStep","numSteps","find","length","$prevBtn","$nextBtn","kids","children","detach","nextText","trim","text","append","steps","addClass","window","console","warn","on","proxy","previous","next","stepclicked","destroy","remove","outerHTML","addSteps","index","i","l","$pane","$startPane","$startStep","$step","items","slice","call","arguments","$steps","$stepContent","Array","label","badge","pane","before","syncSteps","setState","removeSteps","howMany","$start","action","undefined","prev","each","item","canMovePrev","isFirstStep","isLastStep","last","lastText","removeClass","prevSelector","$prevSteps","currentSelector","$currentStep","target","first","totalWidth","outerWidth","containerWidth","width","newMargin","position","left","e","create","trigger","initialized","li","currentTarget","evt","isDefaultPrevented","isNaN","parseInt","html","direction","is","firstFormField","focus","retVal","Number","stepname","register"],"mappings":"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","file":"../Wizard.js","sourcesContent":["define([\n  \"skylark-langx/langx\",\n  \"skylark-domx-browser\",\n  \"skylark-domx-eventer\",\n  \"skylark-domx-noder\",\n  \"skylark-domx-geom\",\n  \"skylark-domx-query\",\n  \"skylark-domx-plugins-base\",\n  \"./panels\"\n],function(langx,browser,eventer,noder,geom,$,plugins,panels){\n\n\n\tvar Wizard = plugins.Plugin.inherit({\n\t\tklassName: \"Wizard\",\n\n\t    pluginName : \"domx.panels.wizard\",\n\n\t    options : {\n\t\t\tdisablePreviousStep: false,\n\t\t\tselectedItem: {\n\t\t\t\tstep: -1\n\t\t\t}//-1 means it will attempt to look for \"active\" class in order to set the step\n\t    },\n\n\t    _construct : function(elm,options) {\n\t\t    this.overrided(elm,options);\n\n\t\t\tthis.$element = this.$();\n\t\t\tthis.options.disablePreviousStep = (this.$element.attr('data-restrict') === 'previous') ? true : this.options.disablePreviousStep;\n\t\t\tthis.currentStep = this.options.selectedItem.step;\n\t\t\tthis.numSteps = this.$element.find('.steps li').length;\n\t\t\tthis.$prevBtn = this.$element.find('button.btn-prev');\n\t\t\tthis.$nextBtn = this.$element.find('button.btn-next');\n\n\t\t\tvar kids = this.$nextBtn.children().detach();\n\t\t\tthis.nextText = langx.trim(this.$nextBtn.text());\n\t\t\tthis.$nextBtn.append(kids);\n\n\t\t\tvar steps = this.$element.children('.steps-container');\n\t\t\t// maintains backwards compatibility with < 3.8, will be removed in the future\n\t\t\tif (steps.length === 0) {\n\t\t\t\tsteps = this.$element;\n\t\t\t\tthis.$element.addClass('no-steps-container');\n\t\t\t\tif (window && window.console && window.console.warn) {\n\t\t\t\t\twindow.console.warn('please update your wizard markup to include \".steps-container\" as seen in http://getfuelux.com/javascript.html#wizard-usage-markup');\n\t\t\t\t}\n\t\t\t}\n\t\t\tsteps = steps.find('.steps');\n\n\t\t\t// handle events\n\t\t\tthis.$prevBtn.on('click.fu.wizard', langx.proxy(this.previous, this));\n\t\t\tthis.$nextBtn.on('click.fu.wizard', langx.proxy(this.next, this));\n\t\t\tsteps.on('click.fu.wizard', 'li.complete', langx.proxy(this.stepclicked, this));\n\n\t\t\tthis.selectedItem(this.options.selectedItem);\n\n\t\t\tif (this.options.disablePreviousStep) {\n\t\t\t\tthis.$prevBtn.attr('disabled', true);\n\t\t\t\tthis.$element.find('.steps').addClass('previous-disabled');\n\t\t\t}\n\t\t},\n\n\t\tdestroy: function () {\n\t\t\tthis.$element.remove();\n\t\t\t// any external bindings [none]\n\t\t\t// empty elements to return to original markup [none]\n\t\t\t// returns string of markup\n\t\t\treturn this.$element[0].outerHTML;\n\t\t},\n\n\t\t//index is 1 based\n\t\t//second parameter can be array of objects [{ ... }, { ... }] or you can pass n additional objects as args\n\t\t//object structure is as follows (all params are optional): { badge: '', label: '', pane: '' }\n\t\taddSteps: function (index) {\n\t\t\tvar items = [].slice.call(arguments).slice(1);\n\t\t\tvar $steps = this.$element.find('.steps');\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\t\t\tvar i, l, $pane, $startPane, $startStep, $step;\n\n\t\t\tindex = (index === -1 || (index > (this.numSteps + 1))) ? this.numSteps + 1 : index;\n\t\t\tif (items[0] instanceof Array) {\n\t\t\t\titems = items[0];\n\t\t\t}\n\n\t\t\t$startStep = $steps.find('li:nth-child(' + index + ')');\n\t\t\t$startPane = $stepContent.find('.step-pane:nth-child(' + index + ')');\n\t\t\tif ($startStep.length < 1) {\n\t\t\t\t$startStep = null;\n\t\t\t}\n\n\t\t\tfor (i = 0, l = items.length; i < l; i++) {\n\t\t\t\t$step = $('<li data-step=\"' + index + '\"><span class=\"badge badge-info\"></span></li>');\n\t\t\t\t$step.append(items[i].label || '').append('<span class=\"chevron\"></span>');\n\t\t\t\t$step.find('.badge').append(items[i].badge || index);\n\n\t\t\t\t$pane = $('<div class=\"step-pane\" data-step=\"' + index + '\"></div>');\n\t\t\t\t$pane.append(items[i].pane || '');\n\n\t\t\t\tif (!$startStep) {\n\t\t\t\t\t$steps.append($step);\n\t\t\t\t\t$stepContent.append($pane);\n\t\t\t\t} else {\n\t\t\t\t\t$startStep.before($step);\n\t\t\t\t\t$startPane.before($pane);\n\t\t\t\t}\n\n\t\t\t\tindex++;\n\t\t\t}\n\n\t\t\tthis.syncSteps();\n\t\t\tthis.numSteps = $steps.find('li').length;\n\t\t\tthis.setState();\n\t\t},\n\n\t\t//index is 1 based, howMany is number to remove\n\t\tremoveSteps: function (index, howMany) {\n\t\t\tvar action = 'nextAll';\n\t\t\tvar i = 0;\n\t\t\tvar $steps = this.$element.find('.steps');\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\t\t\tvar $start;\n\n\t\t\thowMany = (howMany !== undefined) ? howMany : 1;\n\n\t\t\tif (index > $steps.find('li').length) {\n\t\t\t\t$start = $steps.find('li:last');\n\t\t\t} else {\n\t\t\t\t$start = $steps.find('li:nth-child(' + index + ')').prev();\n\t\t\t\tif ($start.length < 1) {\n\t\t\t\t\taction = 'children';\n\t\t\t\t\t$start = $steps;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t$start[action]().each(function () {\n\t\t\t\tvar item = $(this);\n\t\t\t\tvar step = item.attr('data-step');\n\t\t\t\tif (i < howMany) {\n\t\t\t\t\titem.remove();\n\t\t\t\t\t$stepContent.find('.step-pane[data-step=\"' + step + '\"]:first').remove();\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\ti++;\n\t\t\t});\n\n\t\t\tthis.syncSteps();\n\t\t\tthis.numSteps = $steps.find('li').length;\n\t\t\tthis.setState();\n\t\t},\n\n\t\tsetState: function () {\n\t\t\tvar canMovePrev = (this.currentStep > 1);//remember, steps index is 1 based...\n\t\t\tvar isFirstStep = (this.currentStep === 1);\n\t\t\tvar isLastStep = (this.currentStep === this.numSteps);\n\n\t\t\t// disable buttons based on current step\n\t\t\tif (!this.options.disablePreviousStep) {\n\t\t\t\tthis.$prevBtn.attr('disabled', (isFirstStep === true || canMovePrev === false));\n\t\t\t}\n\n\t\t\t// change button text of last step, if specified\n\t\t\tvar last = this.$nextBtn.attr('data-last');\n\t\t\tif (last) {\n\t\t\t\tthis.lastText = last;\n\t\t\t\t// replace text\n\t\t\t\tvar text = this.nextText;\n\t\t\t\tif (isLastStep === true) {\n\t\t\t\t\ttext = this.lastText;\n\t\t\t\t\t// add status class to wizard\n\t\t\t\t\tthis.$element.addClass('complete');\n\t\t\t\t} else {\n\t\t\t\t\tthis.$element.removeClass('complete');\n\t\t\t\t}\n\n\t\t\t\tvar kids = this.$nextBtn.children().detach();\n\t\t\t\tthis.$nextBtn.text(text).append(kids);\n\t\t\t}\n\n\t\t\t// reset classes for all steps\n\t\t\tvar $steps = this.$element.find('.steps li');\n\t\t\t$steps.removeClass('active').removeClass('complete');\n\t\t\t$steps.find('span.badge').removeClass('badge-info').removeClass('badge-success');\n\n\t\t\t// set class for all previous steps\n\t\t\tvar prevSelector = '.steps li:lt(' + (this.currentStep - 1) + ')';\n\t\t\tvar $prevSteps = this.$element.find(prevSelector);\n\t\t\t$prevSteps.addClass('complete');\n\t\t\t$prevSteps.find('span.badge').addClass('badge-success');\n\n\t\t\t// set class for current step\n\t\t\tvar currentSelector = '.steps li:eq(' + (this.currentStep - 1) + ')';\n\t\t\tvar $currentStep = this.$element.find(currentSelector);\n\t\t\t$currentStep.addClass('active');\n\t\t\t$currentStep.find('span.badge').addClass('badge-info');\n\n\t\t\t// set display of target element\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\t\t\tvar target = $currentStep.attr('data-step');\n\t\t\t$stepContent.find('.step-pane').removeClass('active');\n\t\t\t$stepContent.find('.step-pane[data-step=\"' + target + '\"]:first').addClass('active');\n\n\t\t\t// reset the wizard position to the left\n\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: 0');\n\n\t\t\t// check if the steps are wider than the container div\n\t\t\tvar totalWidth = 0;\n\t\t\tthis.$element.find('.steps > li').each(function () {\n\t\t\t\ttotalWidth += $(this).outerWidth();\n\t\t\t});\n\t\t\tvar containerWidth = 0;\n\t\t\tif (this.$element.find('.actions').length) {\n\t\t\t\tcontainerWidth = this.$element.width() - this.$element.find('.actions').first().outerWidth();\n\t\t\t} else {\n\t\t\t\tcontainerWidth = this.$element.width();\n\t\t\t}\n\n\t\t\tif (totalWidth > containerWidth) {\n\t\t\t\t// set the position so that the last step is on the right\n\t\t\t\tvar newMargin = totalWidth - containerWidth;\n\t\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: -' + newMargin + 'px');\n\n\t\t\t\t// set the position so that the active step is in a good\n\t\t\t\t// position if it has been moved out of view\n\t\t\t\tif (this.$element.find('li.active').first().position().left < 200) {\n\t\t\t\t\tnewMargin += this.$element.find('li.active').first().position().left - 200;\n\t\t\t\t\tif (newMargin < 1) {\n\t\t\t\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: 0');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: -' + newMargin + 'px');\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// only fire changed event after initializing\n\t\t\tif (typeof (this.initialized) !== 'undefined') {\n\t\t\t\tvar e = eventer.create('changed.fu.wizard');\n\t\t\t\tthis.$element.trigger(e, {\n\t\t\t\t\tstep: this.currentStep\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.initialized = true;\n\t\t},\n\n\t\tstepclicked: function (e) {\n\t\t\tvar li = $(e.currentTarget);\n\t\t\tvar index = this.$element.find('.steps li').index(li);\n\n\t\t\tif (index < this.currentStep && this.options.disablePreviousStep) {//enforce restrictions\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tvar evt = eventer.create('stepclicked.fu.wizard');\n\t\t\t\tthis.$element.trigger(evt, {\n\t\t\t\t\tstep: index + 1\n\t\t\t\t});\n\t\t\t\tif (evt.isDefaultPrevented()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.currentStep = (index + 1);\n\t\t\t\tthis.setState();\n\t\t\t}\n\t\t},\n\n\t\tsyncSteps: function () {\n\t\t\tvar i = 1;\n\t\t\tvar $steps = this.$element.find('.steps');\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\n\t\t\t$steps.children().each(function () {\n\t\t\t\tvar item = $(this);\n\t\t\t\tvar badge = item.find('.badge');\n\t\t\t\tvar step = item.attr('data-step');\n\n\t\t\t\tif (!isNaN(parseInt(badge.html(), 10))) {\n\t\t\t\t\tbadge.html(i);\n\t\t\t\t}\n\n\t\t\t\titem.attr('data-step', i);\n\t\t\t\t$stepContent.find('.step-pane[data-step=\"' + step + '\"]:last').attr('data-step', i);\n\t\t\t\ti++;\n\t\t\t});\n\t\t},\n\n\t\tprevious: function () {\n\t\t\tif (this.options.disablePreviousStep || this.currentStep === 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar e = eventer.create('actionclicked.fu.wizard');\n\t\t\tthis.$element.trigger(e, {\n\t\t\t\tstep: this.currentStep,\n\t\t\t\tdirection: 'previous'\n\t\t\t});\n\t\t\tif (e.isDefaultPrevented()) {\n\t\t\t\treturn;\n\t\t\t}// don't increment ...what? Why?\n\n\t\t\tthis.currentStep -= 1;\n\t\t\tthis.setState();\n\n\t\t\t// only set focus if focus is still on the $nextBtn (avoid stomping on a focus set programmatically in actionclicked callback)\n\t\t\tif (this.$prevBtn.is(':focus')) {\n\t\t\t\tvar firstFormField = this.$element.find('.active').find('input, select, textarea')[0];\n\n\t\t\t\tif (typeof firstFormField !== 'undefined') {\n\t\t\t\t\t// allow user to start typing immediately instead of having to click on the form field.\n\t\t\t\t\t$(firstFormField).focus();\n\t\t\t\t} else if (this.$element.find('.active input:first').length === 0 && this.$prevBtn.is(':disabled')) {\n\t\t\t\t\t//only set focus on a button as the last resort if no form fields exist and the just clicked button is now disabled\n\t\t\t\t\tthis.$nextBtn.focus();\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\tnext: function () {\n\t\t\tvar e = eventer.create('actionclicked.fu.wizard');\n\t\t\tthis.$element.trigger(e, {\n\t\t\t\tstep: this.currentStep,\n\t\t\t\tdirection: 'next'\n\t\t\t});\n\t\t\tif (e.isDefaultPrevented()) {\n\t\t\t\treturn;\n\t\t\t}// respect preventDefault in case dev has attached validation to step and wants to stop propagation based on it.\n\n\t\t\tif (this.currentStep < this.numSteps) {\n\t\t\t\tthis.currentStep += 1;\n\t\t\t\tthis.setState();\n\t\t\t} else {//is last step\n\t\t\t\tthis.$element.trigger('finished.fu.wizard');\n\t\t\t}\n\n\t\t\t// only set focus if focus is still on the $nextBtn (avoid stomping on a focus set programmatically in actionclicked callback)\n\t\t\tif (this.$nextBtn.is(':focus')) {\n\t\t\t\tvar firstFormField = this.$element.find('.active').find('input, select, textarea')[0];\n\n\t\t\t\tif (typeof firstFormField !== 'undefined') {\n\t\t\t\t\t// allow user to start typing immediately instead of having to click on the form field.\n\t\t\t\t\t$(firstFormField).focus();\n\t\t\t\t} else if (this.$element.find('.active input:first').length === 0 && this.$nextBtn.is(':disabled')) {\n\t\t\t\t\t//only set focus on a button as the last resort if no form fields exist and the just clicked button is now disabled\n\t\t\t\t\tthis.$prevBtn.focus();\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\tselectedItem: function (selectedItem) {\n\t\t\tvar retVal, step;\n\n\t\t\tif (selectedItem) {\n\t\t\t\tstep = selectedItem.step || -1;\n\t\t\t\t//allow selection of step by data-name\n\t\t\t\tstep = Number(this.$element.find('.steps li[data-name=\"' + step + '\"]').first().attr('data-step')) || Number(step);\n\n\t\t\t\tif (1 <= step && step <= this.numSteps) {\n\t\t\t\t\tthis.currentStep = step;\n\t\t\t\t\tthis.setState();\n\t\t\t\t} else {\n\t\t\t\t\tstep = this.$element.find('.steps li.active:first').attr('data-step');\n\t\t\t\t\tif (!isNaN(step)) {\n\t\t\t\t\t\tthis.currentStep = parseInt(step, 10);\n\t\t\t\t\t\tthis.setState();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tretVal = this;\n\t\t\t} else {\n\t\t\t\tretVal = {\n\t\t\t\t\tstep: this.currentStep\n\t\t\t\t};\n\t\t\t\tif (this.$element.find('.steps li.active:first[data-name]').length) {\n\t\t\t\t\tretVal.stepname = this.$element.find('.steps li.active:first').attr('data-name');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn retVal;\n\t\t}\n\n\t});\n\n   plugins.register(Wizard);\n\n\treturn panels.Wizard = Wizard;\n\n});\n"]}