/**
 * skylark-domx-panels - The skylark panel plugins library for dom api extension
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-domx-panels/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-query","skylark-domx-plugins","./panels"],function(t,e,i,s,a,n){"use strict";var l=a.Plugin.inherit({klassName:"Collapse",pluginName:"domx.collapse",options:{toggle:!0},_construct:function(t,e){this.overrided(t,e),this.$element=this.$(),this.$trigger=s('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()},dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){if(!this.transitioning&&!this.$element.hasClass("in")){var s,a=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(a&&a.length&&(s=a.data("collapse"))&&s.transitioning)){var n=i.create("show.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){a&&a.length&&(a.plugin("domx.collapse").hide(),s||a.data("collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.collapse")};if(!e.support.transition)return o.call(this);var d=t.camelCase(["scroll",r].join("-"));this.$element.one("transitionEnd",t.proxy(o,this)).emulateTransitionEnd(l.TRANSITION_DURATION)[r](this.$element[0][d])}}}},hide:function(){if(!this.transitioning&&this.$element.hasClass("in")){var s=i.create("hide.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){var a=this.dimension();this.$element[a](this.$element[a]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.collapse")};if(!e.support.transition)return n.call(this);this.$element[a](0).one("transitionEnd",t.proxy(n,this)).emulateTransitionEnd(l.TRANSITION_DURATION)}}},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()},getParent:function(){return s(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(t,e){var i,a,n,l=s(e);this.addAriaAndCollapsedClass((n=(i=l).attr("data-target")||(a=i.attr("href"))&&a.replace(/.*(?=#[^\s]+$)/,""),s(n)),l)},this)).end()},addAriaAndCollapsedClass:function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)}});return l.TRANSITION_DURATION=350,a.register(l),l});
//# sourceMappingURL=sourcemaps/Collapse.js.map
